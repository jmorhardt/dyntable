(function(e){e.fn.dyntable=function(t){function o(){if(r.data.rows==null)s.setData(s.getData,s._setData,r);u();if(r.dynamicUpdate.enabled==true){var e=0;setInterval(function(){if(e==0)i.pontificate(false);else i.pontificate(true);e++},r.dynamicUpdate.interval)}}function u(){e(r.selector.container).html(i.buildTable(r.data))}if(!t){console.log('You must either specify data as "data:{header: <header data>, rows: <rows data>}" or provide a data source using the dataUrl parameter.');return}if(t&&!t.dataUrl&&!t.data){console.log('You must either specify data as "data:{header: <header data>, rows: <rows data>}" or provide a data source using the dataUrl parameter.');return}if(t&&t.dynamicUpdate.enabled==true&&(t.dataUrl==""||t.dataUrl==undefined)){console.log("You requested the table update dynamically but did not specify a data source. Use the dataUrl parameter to define a data source.");return}if(t&&t.dynamicUpdate.enabled==true&&(t.dynamicUpdate.interval==null||t.dynamicUpdate.interval==undefined||t.dynamicUpdate.interval=="")){console.log("You requested the table update dynamically but did not specify an update interval. Use the dynamicUpdate.interval parameter to define an update interval.");return}var n=this;var r=e.extend({selector:{container:"#"+n[0].id,table:"#queue-table",row:".queue-row"},dynamicUpdate:{enabled:false,interval:null},dataUrl:null,data:{header:null,rows:null}},t);var i={pontificate:function(){s.setData(s.getData,s._setData,r);var t=e(r.selector.table).find(r.selector.row);e.each(r.data.rows,function(n,s){var o=i.buildRow(s,n+1);if(n>t.length-1){e(r.selector.table).find("tr").last().after(o).fadeIn();return}if(s.id!=t[n].id){e(t[n]).before(o);e(t[n]).remove()}});e.each(t,function(t,n){if(t>r.data.rows.length-1){e(n).remove()}})},buildTable:function(t){var n="";n+='<table id="'+r.selector.table.split("#")[1]+'">';if(t.header)n+=this.buildHeader(t.header);e.each(t.rows,function(e,t){n+=i.buildRow(t,e+1)});n+="</table>";return n},buildTableTag:function(){return'<table class="'+r.selector.table+'"></table>'},buildHeader:function(t){var n="<tr>";e.each(t,function(e,t){n+="<th>"+t+"</th>"});n+="</tr>";return n},buildRow:function(t,n){var i='<tr class="'+r.selector.row.split(".")[1]+'" id="'+t.id+'">';if(n!=null){i+='<td class="rowNumber">'+n+"</td>"}e.each(t,function(e,t){if(e!="id"){i+='<td class="'+e+'">'+t+"</td>"}});i+="</tr>";return i}};var s={getData:function(t,n,r){e.ajax({url:n,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",async:false,success:function(e){t(e,r)},error:function(e){console.log("There was an error processing the request to "+n)}})},setData:function(e,t,n){e(t,n.dataUrl,n)},_setData:function(e,t){r.data.rows=e.rows}};o();return this}})(jQuery)
